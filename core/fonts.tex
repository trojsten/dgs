% Setup fonts -- see fontspec/mathspec documentation.
% Fonts are loaded from .ttf and .otf files in the core/fonts/ directory. We NEVER use system fonts.

% Change allocator to allow more than 16 alphabets per document

\makeatletter
    \def\new@mathgroup{\alloc@8\mathgroup\mathchardef\@cclvi}
    \patchcmd{\document@select@group}{\sixt@@n}{\@cclvi}{}{}
    \patchcmd{\select@group}{\sixt@@n}{\@cclvi}{}{}
\makeatother

\defaultfontfeatures{
    Mapping         = tex-text,
    Scale           = MatchLowercase,
    Ligatures       = TeX
}
\setallmainfonts[
    Path            = core/fonts/ ,
    Extension       = .otf ,
    UprightFont     = *-r ,
    BoldFont        = *-b ,
    ItalicFont      = *-i ,
    BoldItalicFont  = *-bi
]{minionpro}
\setmathfont(Digits,Latin,Greek)[
    Path            = core/fonts/ ,
    Extension       = .otf ,
    UprightFont     = *-r ,
    BoldFont        = *-b ,
    ItalicFont      = *-i ,
    BoldItalicFont  = *-bi
]{minionpro}
\setmonofont[
    Path            = core/fonts/ ,
    Extension       = .ttf ,
    UprightFont     = *-r ,
    BoldFont        = *-b ,
    ItalicFont      = *-i ,
    BoldItalicFont  = *-bi
]{ubuntumono}
\setsansfont[
    Path            = core/fonts/ ,
    Extension       = .ttf ,
    UprightFont     = *-r ,
    BoldFont        = *-b ,
    ItalicFont      = *-i ,
    BoldItalicFont  = *-bi
]{verdana}

% Fixes mathspec bug -- URL numbers are normally rendered with upright font
\makeatletter
    \DeclareMathSymbol{0}{\mathalpha}{\eu@DigitsArabic@symfont}{`0}
    \DeclareMathSymbol{1}{\mathalpha}{\eu@DigitsArabic@symfont}{`1}
    \DeclareMathSymbol{2}{\mathalpha}{\eu@DigitsArabic@symfont}{`2}
    \DeclareMathSymbol{3}{\mathalpha}{\eu@DigitsArabic@symfont}{`3}
    \DeclareMathSymbol{4}{\mathalpha}{\eu@DigitsArabic@symfont}{`4}
    \DeclareMathSymbol{5}{\mathalpha}{\eu@DigitsArabic@symfont}{`5}
    \DeclareMathSymbol{6}{\mathalpha}{\eu@DigitsArabic@symfont}{`6}
    \DeclareMathSymbol{7}{\mathalpha}{\eu@DigitsArabic@symfont}{`7}
    \DeclareMathSymbol{8}{\mathalpha}{\eu@DigitsArabic@symfont}{`8}
    \DeclareMathSymbol{9}{\mathalpha}{\eu@DigitsArabic@symfont}{`9}
\makeatother

\DeclareFontFamily{U}{skulls}{}
\DeclareFontShape{U}{skulls}{m}{n}{ <-> skull }{}
\newcommand{\skull}{\text{\usefont{U}{skulls}{m}{n}\symbol{'101}}}
