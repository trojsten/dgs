%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Operators %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{core/tex/math/diff.tex}
\input{core/tex/math/integrals.tex}
\input{core/tex/math/vector.tex}
\input{core/tex/math/matrix.tex}


\DeclareMathOperator{\atantwo}{atan2}

\DeclareMathOperator{\maxop}{max\ }
\DeclareMathOperator{\minop}{min\ }

% Logical operators
\DeclareMathOperator{\LXor}{\quad\lxor\quad}
\DeclareMathOperator{\LOr}{\quad\lor\quad}
\DeclareMathOperator{\LAnd}{\quad\land\quad}
\DeclareMathOperator{\LNand}{\quad\lnand\quad}

\DeclareMathOperator{\union}{\cup}
\DeclareMathOperator{\intersection}{\cap}

% Sinc
\DeclareMathOperator{\sinc}{sinc}
% Haversine
\DeclareMathOperator{\hav}{hav}

\ExplSyntaxOn
\makeatletter
\NewDocumentCommand{\cdiff}{O{,} m m}{\dgs_split_diff:nnn {#1} {#2} {#3}}

\cs_new_protected:Npn \dgs_split_diff:nnn #1 #2 #3 {
    \seq_set_split:Nnn \l_split_args_seq{#1}{#2}
    \seq_map_inline:Nn \l_split_args_seq {#3 ##1}
}

\NewDocumentCommand{\Tuple}{O{;} >{\SplitList{;}} m}{%
    \def\itemdelim@{\def\itemdelim@{#1}}%
    {%
        \left(\ProcessList{#2}{\insert@separator}\right)%
    }%
}

\NewDocumentCommand{\Coord}{O{;} >{\SplitList{;}} m}{%
    \def\itemdelim@{\def\itemdelim@{#1}}%
    {%
        \left[\ProcessList{#2}{\insert@separator}\right]%
    }%
}

\newcommand\insert@separator[1]{\itemdelim@ #1}

\seq_new:N \l_split_args_seq
\makeatother
\ExplSyntaxOff


\NewDocumentCommand{\ArrowVector}{m}{\vv{#1}}
\NewDocumentCommand{\LongVector}{m}{\overrightarrow{#1}}
\NewDocumentCommand{\BoldVector}{m}{\boldsymbol{#1}}
\NewDocumentCommand{\UnitVector}{m}{\hat{\vec{#1}}}
\NewDocumentCommand{\UnitBoldVector}{m}{\hat{\BoldVector{#1}}}
\NewDocumentCommand{\UnitArrowVector}{m}{\hat{#1}}

\NewDocumentCommand{\Eval}{m m O{}}{\left.#1\right|_{#2}^{#3}}
\NewDocumentCommand{\EvalP}{m m O{}}{\left(#1\right)_{#2}^{#3}}
\NewDocumentCommand{\EvalB}{m m O{}}{\left[#1\right]_{#2}^{#3}}
\NewDocumentCommand{\ExpectedChevrons}{m}{\left<#1\right>}
\NewDocumentCommand{\ExpectedE}{m}{\mathrm{E}\left[#1\right]}
\NewDocumentCommand{\Mean}{m}{\overline{#1}}

\NewDocumentCommand{\QText}{m}{\quad\text{#1}\quad}
\NewDocumentCommand{\QQText}{m}{\qquad\text{#1}\qquad}

\NewDocumentCommand{\Floor}{m}{\left\lfloor#1\right\rfloor}
\NewDocumentCommand{\Ceil}{m}{\left\lceil#1\right\rceil}

\NewDocumentCommand{\Lim}{m m}{\lim\limits_{#1 \rightarrow #2}}
\NewDocumentCommand{\Exp}{m}{e^{#1}}
\NewDocumentCommand{\LogTen}{}{\log_{10}}
\NewDocumentCommand{\Must}{m}{\stackrel{!}{#1}}
\NewDocumentCommand{\MustEqual}{}{\Must{=}}
\NewDocumentCommand{\DefEqual}{}{\stackrel{\mathrm{def}}{=}}
\NewDocumentCommand{\Implies}{}{\quad\Rightarrow\quad}
\NewDocumentCommand{\Iff}{}{\quad\Leftrightarrow\quad}

% Nuclide[A][Z]{symbol}
% \NUclide[235][92]{U} for uranium
\NewDocumentCommand{\Nuclide}{O{} O{} m}{\ce{^{#1}_{#2}#3}}

\NewDocumentCommand{\Aggregate}{m O{} O{} m}{#1\limits_{#2}^{#3} #4}
\NewDocumentCommand{\AggregateP}{m O{} O{} m}{\Aggregate{#1}[#2][#3]{\left(#4\right)}}
\NewDocumentCommand{\Sum}{O{} O{} m}{\Aggregate{\sum}[#1][#2]{#3}}
\NewDocumentCommand{\SumP}{O{} O{} m}{\AggregateP{\sum}[#1][#2]{#3}}
\NewDocumentCommand{\Product}{O{} O{} m}{\Aggregate{\prod}[#1][#2]{#3}}
\NewDocumentCommand{\ProductP}{O{} O{} m}{\AggregateP{\sum}[#1][#2]{#3}}
\NewDocumentCommand{\CartesianProduct}{O{} O{} m}{\Aggregate{\bigtimes}[#1][#2]{#3}}
\NewDocumentCommand{\CartesianProductP}{O{} O{} m}{\AggregateP{\bigtimes}#1][#2]{#3}}
\NewDocumentCommand{\Union}{O{} O{} m}{\Aggregate{\bigcup}[#1][#2]{#3}}
\NewDocumentCommand{\UnionP}{O{} O{} m}{\AggregateP{\bigcup}[#1][#2]{#3}}
\NewDocumentCommand{\Intersection}{O{} O{} m}{\Aggregate{\bigcap}[#1][#2]{#3}}
\NewDocumentCommand{\IntersectionP}{O{} O{} m}{\AggregateP{\bigcap}[#1][#2]{#3}}

\makeatletter
\DeclarePairedDelimiter\abs@{\lvert}{\rvert}
\NewDocumentCommand{\Abs}{m}{\abs@*{#1}}
\makeatother

\NewDocumentCommand{\Max}{O{} m}{\underset{#1}{\maxop}{#2}}
\NewDocumentCommand{\Min}{O{} m}{\underset{#1}{\minop}{#2}}

\NewDocumentCommand{\Angle}{}{\sphericalangle}

\NewDocumentCommand{\Mag}{m}{\ensuremath{{#1}^{\mathrm{m}}}}

% Distribution #1 of variable #2 with parameters #3
\NewDocumentCommand{\Distribution}{m m m}{#1(#2 \mid #3)}

% Asymptotic notations
\NewDocumentCommand{\SmallO}{m}{\mathcal{o}\left(#1\right)}
\NewDocumentCommand{\BigO}{m}{\mathcal{O}\left(#1\right)}
\NewDocumentCommand{\BigTheta}{m}{\mathcal{\Theta}\left(#1\right)}

\NewDocumentCommand{\Set}{m O{} O{}}{%
    \left\{#1\right\}\ifblank{#2}{}{_{#2}}\ifblank{#3}{}{^{#3}}%
}

\NewDocumentCommand{\Operation}{+m}{%
    & \qquad \bigg/ #1%
}

% Number sets
\NewDocumentCommand{\Natural}{}{\mathbb{N}}
\NewDocumentCommand{\NaturalZero}{}{\mathbb{N}_0}
\NewDocumentCommand{\Integer}{}{\mathbb{Z}}
\NewDocumentCommand{\Rational}{}{\mathbb{Q}}
\NewDocumentCommand{\Real}{}{\mathbb{R}}
\NewDocumentCommand{\RealPos}{}{\mathbb{R}^{+}}
\NewDocumentCommand{\RealNeg}{}{\mathbb{R}^{-}}
\NewDocumentCommand{\RealNonneg}{}{\mathbb{R}_{\geq 0}}
\NewDocumentCommand{\RealNonpos}{}{\mathbb{R}_{\leq 0}}
\NewDocumentCommand{\Complex}{}{\mathbb{C}}
\NewDocumentCommand{\Quaternions}{}{\mathbb{H}}

% Functions
\NewDocumentCommand{\Domain}{m}{\mathrm{dom}(#1)}

% Intervals
\NewDocumentCommand{\IntervalCC}{m m}{\left[#1; #2\right]}
\NewDocumentCommand{\IntervalCO}{m m}{\left[#1; #2\right)}
\NewDocumentCommand{\IntervalOC}{m m}{\left(#1; #2\right]}
\NewDocumentCommand{\IntervalOO}{m m}{\left(#1; #2\right)}

\NewDocumentCommand{\kth}{m}{\ensuremath{#1^{\text{th}}}}

\NewDocumentCommand{\Expected}{m}{\ExpectedE{#1}}

\input{core/tex/math/patch.tex}

\makeatother
