\documentclass[12pt, twoside]{dgs}

\setActive{\rootDirectory/(* module.id *)/(* course.id *)/(* lecture.id *)}%
\input{core/i18n/slovak/override.tex}
\input{input/scholar/(* course.id *)/.static/format-override.tex}

\setcounter{secnumdepth}{3}

\hypersetup{bookmarksdepth=4}

\fancypagestyle{scholar}{
    \fancyhf{}
    \fancyhead[L]{\textit{(* course.title *)}}
    \fancyhead[R]{\textit{(* lecture.title *)}}
    \fancyfoot[C]{\small \thepage/\pageref*{LastPage}}

    \titleformat{\section}[block]{\Huge\bfseries\centering}{\Roman{section}. }{0pt}{}
    \titleformat{\subsection}[hang]{\Large\bfseries}{}{0pt}{}
    \titleformat{\subsubsection}[hang]{\large\bfseries}{}{0pt}{}[]
    \titleformat{\paragraph}[hang]{\bfseries}{}{0pt}{}[]
    \titleformat{\subparagraph}[hang]{\it\bfseries}{}{0pt}{}[]
    \titlespacing{\section}{0pt}{6mm}{2mm}
    \titlespacing{\subsection}{0pt}{6mm}{4mm}
    \titlespacing{\subsubsection}{0pt}{2mm}{0pt}
    \titlespacing{\paragraph}{0pt}{2mm}{0pt}
    \titlespacing{\subparagraph}{0pt}{2mm}{0pt}
}

\numberwithin{equation}{subsection}
\numberwithin{figure}{subsection}

(@ block style @)(@ endblock @)

\begin{document}
    \pagestyle{scholar}
    \section{(* lecture.title *)}%
    (@ if lecture.has_abstract @)
        \textit{\input{\activeDirectory/abstract.tex}}%
    (@ else @)
        \textit{Prednáška nemá abstrakt (ak ho chceš, vytvor v\ jej priečinku `abstract.md`).}
    (@ endif @)

    (@ block content @)
        \tryInput{\activeDirectory/content.tex}
        (@ for part in parts @)
            \subsection{\texorpdfstring{(* part.title *)}{(* part.pdftitle|default(part.title) *)}}
                \input{\activeDirectory/(* part.id *)/text.tex}
                (@ if part.problems @)
                    \subsubsection{Úlohy}
                    (@ for problem in part.problems @)
                        \paragraph{(* problem.title *)}
                        \protectedInput{\activeDirectory/(* part.id *)/(* problem.id *)/problem.tex}
                        (@ if problem.has_solution @)
                            \paragraph{Riešenie}
                            \protectedInput{\activeDirectory/(* part.id *)/(* problem.id *)/solution.tex}
                        (@ else @)
                            \textit{Táto úloha nemá spísané riešenie.}
                        (@ endif @)
                    (@ endfor @)
                (@ endif @)
        (@ endfor @)
    (@ endblock content @)
\end{document}
